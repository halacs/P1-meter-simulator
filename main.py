import serial
import time
from datetime import datetime

data = """/AUX59902722718

0-0:1.0.0(240304112520W)
0-0:42.0.0(AUX1030302722718)
0-0:96.1.0(9902722718)
0-0:96.14.0(0001)
0-0:96.50.68(ON)
0-0:17.0.0(90.000*kW)
1-0:1.8.0(022803.012*kWh)
1-0:1.8.1(015543.755*kWh)
1-0:1.8.2(007259.257*kWh)
1-0:1.8.3(000000.000*kWh)
1-0:1.8.4(000000.000*kWh)
1-0:2.8.0(000000.000*kWh)
1-0:2.8.1(000000.000*kWh)
1-0:2.8.2(000000.000*kWh)
1-0:2.8.3(000000.000*kWh)
1-0:2.8.4(000000.000*kWh)
1-0:3.8.0(001470.921*kvarh)
1-0:4.8.0(006381.114*kvarh)
1-0:5.8.0(001470.921*kvarh)
1-0:6.8.0(000000.000*kvarh)
1-0:7.8.0(000000.000*kvarh)
1-0:8.8.0(006381.114*kvarh)
1-0:15.8.0(022803.014*kWh)
1-0:32.7.0(233.9*V)
1-0:52.7.0(230.4*V)
1-0:72.7.0(232.7*V)
1-0:31.7.0(002*A)
1-0:51.7.0(002*A)
1-0:71.7.0(002*A)
1-0:13.7.0(0.968)
1-0:33.7.0(0.994)
1-0:53.7.0(0.927)
1-0:73.7.0(0.964)
1-0:14.7.0(50.03*Hz)
1-0:1.7.0(01.612*kW)
1-0:2.7.0(00.000*kW)
1-0:5.7.0(00.000*kvar)
1-0:6.7.0(00.000*kvar)
1-0:7.7.0(00.000*kvar)
1-0:8.7.0(00.417*kvar)
0-0:98.1.0(240301000000W)(022756.691*kWh)(015523.696*kWh)(007232.995*kWh)(000000.000*kWh)(000000.000*kWh)(000000.000*kWh)(001470.695*kvarh)(006356.208*kvarh)(001470.695*kvarh)(000000.000*kvarh)(000000.000*kvarh)(006356.208*kvarh)(022756.693*kWh)(02.304*kW)(02.304*kW)(01.104*kW)(00.000*kW)(00.000*kW)(00.000*kW)
0-0:96.13.0(<FF><FF>
.....
<FF><FF>)
!4454
/
"""

if __name__ == '__main__':
    # 115200 baud
    # 1 start bit
    # 8 data bits
    # no parity bit and
    # 1 stop bit

    with serial.Serial('/dev/ttyUSB0', 115200,
                       timeout=0, parity=serial.PARITY_NONE,
                       rtscts=1, xonxoff=0, writeTimeout=0) as ser:
        while True:
            ser.write(bytearray(data, 'ascii'))
            now = datetime.now()
            print(now.strftime("%Y-%m-%d %H:%M:%S"))
            time.sleep(2)
